#include <stdio.h>
#include <stdlib.h>

char* my_strdup(char *src) {
    char *dup, *p;
    int len = 0;

    // Find the length of src using pointer arithmetic
    char *temp = src;
    while (*temp++) {
        len++;
    }

    // Allocate memory for duplicate string (+1 for '\0')
    dup = (char *)malloc((len + 1) * sizeof(char));
    if (dup == NULL) {
        return NULL;  // allocation failed
    }

    // Copy characters using pointers
    p = dup;
    while (*src) {
        *p++ = *src++;
    }
    *p = '\0';  // null-terminate the new string

    return dup;
}

int main() {
    char original[] = "Hello, world!";
    char *copy = my_strdup(original);

    if (copy == NULL) {
        printf("Memory allocation failed!\n");
        return 1;
    }

    printf("Original: %s\n", original);
    printf("Copy: %s\n", copy);

    free(copy);  // free allocated memory
    return 0;
}
